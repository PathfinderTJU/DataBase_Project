# 数据库大作业 程序设计手册

### 概述

本次大作业目标为实现一个学生选课管理系统 。设计思路为采用完全的前后端分离思想，采用JDBC操作数据库，Java Socket实现网络通信，URL自带参数作为网络请求地址，HTML+CSS+JavaScript作为前端页面。

代码分为以下几部分

- 底层接口：Java：API类：API类中的所有方法均为最底层的数据库操作方法，如增加、修改、删除、查询。输入为String或String数组类型参数，查询方法返回List\<String\>集合类。

- 高层接口：Java：Response类：

  - Response类中的方法用于解析从前端接收到的JSON对象，调用相应的API类方法操纵数据库，再将底层接口返回的集合类封装为JSON对象。输入为JSON对象（采用org.json），输出为JSON对象或JSON对象数组（JSONArray)。

  - main方法用来创建一个本地HTTP服务器套接字，并等待网络连接。

    - 根据HTTP请求类型和URL判断返回文件还是接口数据

      - 只相应GET方法
      - 以http://localhost:8080/api/开头的URL为请求接口数据

    - 若为返回文件，则以字节流传输文件

    - 若为返回接口，URL格式为

      > http://localhost:8080/api/方法名?参数1=x&参数2=y

- 前端静态页面+CSS：位于web文件夹内为前端各个页面的代码。

- JS脚本：位于web文件夹的script文件夹内，为交互脚本。采用fetch进行网络请求，并对接收到的数据解析为JSON对象。

访问一个接口的返回结果示例：

![捕获](C:\Users\Administrator\Desktop\捕获.PNG)

### 运行方法

- 打开login.html开始登录

  - 管理员账号唯一：admin，密码123456
  - 学生账号可自行注册，前提此学生必须已经在数据库中（已入学）
  - 只能修改学生账号的密码

- 学生端：分为四个页面：首页、个人中心、成绩查询、选课。

  学生端权限：

  - 查看、修改自己的个人信息
  - 修改自己的账户密码
  - 查询自己的成绩与平均成绩
  - 查看选课信息、选、退课

- 管理员端，分为五（7）个页面：首页、学生管理、成绩管理（3个子页面）、课程管理、选课

  管理员权限：

  - 查看、修改学生的个人信息。增加、删除学生
  - 登记、修改、删除、查看学生的成绩，根据班级、课程查看成绩的统计信息：如分布、平均值
  - 查看、增加、修改、删除课程的基本信息
  - 为学生选课、退课（选课时不能登成绩，登成绩必须先选课）

### 增加一个学生

登录管理员端->学生管理->增加一名学生，之后在上方全部学生信息就可以查看到

### 选一门课

学生端/管理员端 -> 选课 -> 根据课程信息选课，之后再查询该学生的选课信息即可

### 登成绩

管理员端->成绩管理->增加成绩

### 修改个人信息

学生端/管理员端 ->个人信息管理

### 退课

同选课

### 删除学生

登录管理员端->学生管理->删除一名学生，之后在上方全部学生信息就可以查看到
